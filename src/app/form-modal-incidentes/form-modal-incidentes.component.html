<ion-header>
  <ion-toolbar>
    <ion-title>Crear Nueva incidencia</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cerrar_modal()">Cerrar</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form #incidenteForm="ngForm" (ngSubmit)="onSubmit($event)">
    <ion-list>
      <ion-item>
        <ion-label position="floating">Ingrese el título de la incidencia</ion-label>
        <ion-input type="text" [(ngModel)]="ct_titulo_incidencia" name="ct_titulo_incidencia" required></ion-input>
      </ion-item>
      <div *ngIf="incidenteForm.submitted && !incidenteForm.controls['ct_titulo_incidencia'].valid" class="error-message">
        El título de la incidencia es requerido.
      </div>

      <ion-item>
        <ion-label position="floating">¿Qué problema ocurrió para reportar dicha incidencia?</ion-label>
        <ion-input type="text" [(ngModel)]="ct_descripcion_incidencia" name="ct_descripcion_incidencia" required></ion-input>
      </ion-item>
      <div *ngIf="incidenteForm.submitted && !incidenteForm.controls['ct_descripcion_incidencia'].valid" class="error-message">
        La descripción de la incidencia es requerida.
      </div>

      <ion-item>
        <ion-label position="floating">¿En qué lugar ocurrió la incidencia?</ion-label>
        <ion-input type="text" [(ngModel)]="ct_lugar_incidencia" name="ct_lugar_incidencia" required></ion-input>
      </ion-item>
      <div *ngIf="incidenteForm.submitted && !incidenteForm.controls['ct_lugar_incidencia'].valid" class="error-message">
        El lugar de la incidencia es requerido.
      </div>

      <ion-item class="d-block">
        <ion-label class="mb-2">Seleccione una imagen</ion-label>
        <div class="d-flex align-items-center">
          <label class="btn btn-warning mr-2" for="fileInput">Seleccionar archivo</label>
          <span id="fileName"></span>
          <input type="file" id="fileInput" class="form-control-file" (change)="onFileChange($event)" hidden required>
        </div>
      </ion-item>
      <div *ngIf="incidenteForm.submitted && !img" class="error-message">
        La imagen es requerida.
      </div>
    </ion-list>
    <ion-button expand="block" type="submit" [disabled]="!incidenteForm.valid || !img">Crear Nueva incidencia</ion-button>
  </form>

  <ion-toast [isOpen]="showToast" message="Se ha creado con éxito" duration="2000" color="success"></ion-toast>
</ion-content>
